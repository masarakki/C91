# Chrome Extensionの今後

進化と衰退が速いWebの世界。
Chrome Extensionは今後どうなるのでしょうか。
学習する価値はあるのでしょうか。

## 広がるChrome Extensionの世界

Chrome Extensionは、Chromeだけでなく、今後他の様々なブラウザでも採用されていくようです。
例えばFirefoxは、既存の拡張機能を今後完全に捨てて、すべてChrome Extension互換の[WebExtensions](https://developer.mozilla.org/ja/Add-ons/WebExtensions)に移行するようです。
近い将来、すべてのブラウザに対応するExtensionをひとつのソースで書けるようになるでしょう。
**そのベースとなるのがChrome Extensionである**ことはまず間違いないと思われます。
おそらくその過程で、ユニットテスト用のライブラリも整備されて、複数のブラウザでテストするフレームワークも現れ、さらにプログラミングしやすいものに変化していくでしょう。

また、日本では全く注目されていない残念な**Chrome OS**も、アプリケーションはChrome Extensionと全く同じ要領で作るようです。
Chrome JavaScript APIの中に**Chrome OS専用のAPI**がいくつかあります[^1]。
試してみたいのでChrome OSのマシン欲しいです。。。

今からChrome Extensionの学習に投資することは、**将来的にも無駄になることはない**と思います。
ベテランだけでなく、プログラミング初学者に対しても、**普段使っているソフトウェアを便利にする**という目的は取っ掛かりとして非常に有効でしょう。
**普段遊んでいるMinecraftのMODを作る**のと同じくらいエキサイティングな体験になると思います。

[^1]: ブラウザでは許可されない低レイヤが触れるAPIなど

## Extension Friendlyなサイトを作ろう

一方でサイト制作者に対しても提案があります。

Chrome Extensionは非常に簡単に書け、クロスブラウザの未来が見えているため、これからもさらに利用されていくでしょう。
個々人が、自分だけのためにサイトをカスタマイズする目的で作る事例もあらわれると思います。
そのような場合に、**Chrome Extensionで拡張しやすいサイト**が、そうでないサイトよりユーザを獲得しやすくなる日が来るかもしれません。
コミケWebカタログも、**Extensionでなんとかなったから使えている**と言っても過言ではありません。
だいぶ苦しいコードですが。

経験談でいくと、**きちんとidが振られている**とか、**js用のclassとcss用のclassが分離されている**とか、**まともなイベント設計ができてる**サイトはExtensionが作りやすいと感じました。
これは、**よいHTMLを書く**ことや、**よいJavaScriptを書く**こととベクトルは一緒なので、各々がんばりましょう。
元がクソなサイトはExtensionのコードが不自然になります。[^2]

まだ経験は無いですが、**React**で作られたサイトはおそらくめちゃくちゃExtension作りにくそうと予想しています。
niconicoもHTMLを動的にごっそり変化させるので、[niconico-direct-pagination](https://github.com/masarakki/niconico-direct-pagination)を作るときには相当苦労しました。
DOMの変更を検知する`MutationObserver`という珍しい機能を使っています。

[^2]: fuck-catalogでは、お気に入りグループを変更するのに 選択色変更(クリック) → 解除(右クリック) → スリープ → 選択(右クリック) と非常に不自然なコードになっています
